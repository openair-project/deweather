% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_dw_partial_2d.R
\name{plot_dw_partial_2d}
\alias{plot_dw_partial_2d}
\title{Create a 2-way partial dependence plot for deweather models}
\usage{
plot_dw_partial_2d(
  dw,
  var_x = NULL,
  var_y = NULL,
  intervals = 40L,
  contour = c("none", "lines", "fill"),
  contour_bins = 8,
  exclude_distance = 0.05,
  show_conf_int = FALSE,
  n = NULL,
  prop = 0.05,
  cols = "viridis",
  radial_wd = FALSE,
  plot = TRUE,
  progress = rlang::is_interactive()
)
}
\arguments{
\item{dw}{A deweather model created with \code{\link[=build_dw_model]{build_dw_model()}}.}

\item{var_x, var_y}{The name of the two variables to plot. Must be one of the
variables used in the model. If both are missing, the top two most
individually important numeric variables will be selected automatically.}

\item{intervals}{The number of points for the partial dependence profile.}

\item{contour}{Show contour lines on the plot? Can be one of \code{"none"} (the
default, no contour lines), \code{"lines"} (draws lines) or \code{"fill"} (draws
filled contours using a binned colour scale).}

\item{contour_bins}{How many bins should be drawn if \code{contour != "none"}?}

\item{exclude_distance}{A 2-way partial dependence plot uses
\code{\link[mgcv:exclude.too.far]{mgcv::exclude.too.far()}} to ensure the plotted surface is within range of
the original input data. \code{exclude_distance} defines how far away from the
original data is too far to plot. This should be in the range \code{0} to \code{1},
where higher values are more permissive; \code{1} will retain all data.}

\item{show_conf_int}{Should the bootstrapped 95\% confidence interval be
shown? In \code{\link[=plot_dw_partial_2d]{plot_dw_partial_2d()}} this creates separate facets for the lower
and higher confidence intervals. It may be easiest to see the difference by
using \code{contour = "fill"}.}

\item{n}{The number of observations to use for calculating the partial
dependence profile. If \code{NULL} (default), uses \code{prop} to determine the
sample size.}

\item{prop}{The proportion of input data to use for calculating the partial
dependence profile, between 0 and 1. Default is \code{0.1} (10\% of data).
Ignored if \code{n} is specified.}

\item{cols}{Colours to use for plotting. See \code{\link[openair:openColours]{openair::openColours()}}.}

\item{radial_wd}{Should the \code{"wd"} (wind direction) variable be plotted on a
radial axis? This can enhance interpretability, but makes it inconsistent
with other variables which are plotted on cartesian coordinates. Defaults
to \code{FALSE}.}

\item{plot}{When \code{FALSE}, return a list of plot data instead of a plot.}

\item{progress}{Show a progress bar? Defaults to \code{TRUE} in interactive
sessions.}
}
\value{
A \code{ggplot2} object showing the partial dependence plot. If \code{plot = FALSE}, a named list of plot data will be returned instead.
}
\description{
Generates 2-way partial dependence plot to visualize the relationship between
two predictor variables and model predictions. These plots show how the
predicted pollutant concentration changes as a function of two variables
while averaging over the effects of all other variables.
}
